<div class="dashboard-container">
  
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-left">
      <h1>
        <span class="logo-icon">ğŸ“°</span>
        <span class="logo-text">NewsPulse IQ</span>
        <span class="live-badge">â— LIVE</span>
      </h1>
      <p class="subtitle">Real-time Times of India News with AI Sentiment Analysis</p>
    </div>
    <div class="header-right">
      <div class="search-box">
        <input type="text" 
               placeholder="Search news..." 
               #searchInput
               (keyup.enter)="onSearch(searchInput.value)">
        <button class="search-btn" (click)="onSearch(searchInput.value)">ğŸ”</button>
      </div>
      <div class="theme-toggle">
        <button class="theme-btn" (click)="toggleTheme()">
          <span class="theme-icon">ğŸŒ™</span>
          Dark Mode
        </button>
      </div>
    </div>
  </header>

  <!-- Controls Bar -->
  <div class="controls-bar">
    <div class="controls-left">
      <div class="category-buttons">
        <button *ngFor="let cat of categories" 
                [class.active]="currentCategory === cat.id"
                (click)="loadNews(cat.id)"
                class="category-btn">
          {{cat.icon}} {{cat.name}}
        </button>
      </div>
    </div>
    
    <div class="controls-right">
      <button class="action-btn" (click)="refreshNews()">
        <span class="icon">ğŸ”„</span>
        Refresh News
      </button>
      <button class="action-btn primary" (click)="loadNews('top-stories')">
        <span class="icon">ğŸš¨</span>
        Breaking News
      </button>
    </div>
  </div>

  <!-- Main Dashboard -->
  <div class="dashboard-main">
    
    <!-- Left Sidebar - Stats -->
    <div class="sidebar left-sidebar">
      
      <!-- Stats Cards -->
      <div class="card stats-card">
        <h3 class="card-title">ğŸ“Š Dashboard Stats</h3>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-icon">ğŸ“š</div>
            <div class="stat-info">
              <div class="stat-value">{{dashboardStats.shelves?.count || '1.2k'}}</div>
              <div class="stat-label">Shelves</div>
              <div class="stat-change positive">{{dashboardStats.shelves?.change || '+12%'}}</div>
            </div>
          </div>
          
          <div class="stat-item">
            <div class="stat-icon">ğŸ˜Š</div>
            <div class="stat-info">
              <div class="stat-value">{{dashboardStats.positive?.count || '68'}}</div>
              <div class="stat-label">Positive</div>
              <div class="stat-change positive">{{dashboardStats.positive?.change || '+5%'}}</div>
            </div>
          </div>
          
          <div class="stat-item breaking" (click)="loadNews('top-stories')">
            <div class="stat-icon">ğŸš¨</div>
            <div class="stat-info">
              <div class="stat-value">{{dashboardStats.breaking?.count || '14'}}</div>
              <div class="stat-label">Breaking</div>
              <div class="stat-change positive">{{dashboardStats.breaking?.change || '+9%'}}</div>
            </div>
          </div>
          
          <div class="stat-item">
            <div class="stat-icon">ğŸ“ˆ</div>
            <div class="stat-info">
              <div class="stat-value">{{dashboardStats.counts?.count || '92'}}</div>
              <div class="stat-label">Counts</div>
              <div class="stat-change positive">{{dashboardStats.counts?.change || '+9%'}}</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Sentiment Weather -->
      <div class="card sentiment-card">
        <h3 class="card-title">ğŸ˜Š Sentiment Weather</h3>
        <div class="weather-content">
          <div class="weather-icon">ğŸŒ¤ï¸</div>
          <div class="weather-info">
            <div class="weather-status">{{dashboardStats.sentiment?.overall || 'Mostly Positive'}}</div>
            <div class="weather-desc">{{dashboardStats.sentiment?.positive || '62'}}% positive today</div>
          </div>
          <div class="weather-temp positive">{{dashboardStats.sentiment?.change || '+5%'}}</div>
        </div>
        <div class="weather-bar">
          <div class="weather-progress positive" [style.width.%]="dashboardStats.sentiment?.positive || 62"></div>
          <div class="weather-progress negative" [style.width.%]="dashboardStats.sentiment?.negative || 18"></div>
          <div class="weather-progress neutral" [style.width.%]="dashboardStats.sentiment?.neutral || 20"></div>
        </div>
      </div>
      
      <!-- Trending Topics -->
      <div class="card trending-card">
        <h3 class="card-title">ğŸ”¥ Trending Topics</h3>
        <div class="trending-list">
          <div *ngFor="let topic of trendingTopics" 
               class="trending-item"
               (click)="loadNews(topic.category)">
            <span class="trend-icon">#</span>
            <span class="trend-name">{{topic.topic}}</span>
            <span class="trend-count">{{topic.count}}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Center Content - News -->
    <div class="center-content">
      
      <!-- Current Category Info -->
      <div class="section-header">
        <h2>
          <span class="icon">ğŸ“°</span> 
          Latest {{currentCategory | titlecase}} News from Times of India
          <span class="article-count">({{newsArticles.length}} articles)</span>
        </h2>
        <div class="loading-indicator" *ngIf="isLoading">
          <div class="spinner"></div>
          <span>Loading real news from Times of India...</span>
        </div>
      </div>
      
      <!-- News Grid -->
      <div class="news-grid">
        <div *ngFor="let article of newsArticles" class="news-card" [class]="'sentiment-' + article.sentiment">
          
          <!-- Article Image -->
          <div class="news-image" *ngIf="article.image">
            <img [src]="article.image" 
                 [alt]="article.title"
                 (error)="article.image = 'https://static.toiimg.com/photo/msid-99999999.cms'">
          </div>
          
          <!-- Article Content -->
          <div class="news-content">
            <div class="news-meta">
              <span class="news-category">{{article.category || 'General'}}</span>
              <span class="news-sentiment" [class]="getSentimentClass(article.sentiment)">
                {{getSentimentIcon(article.sentiment)}} {{article.sentiment | titlecase}}
              </span>
            </div>
            
            <h3 class="news-headline">
              <a [href]="article.url" 
                 target="_blank" 
                 (click)="openArticle(article.url)">
                {{article.title}}
              </a>
            </h3>
            
            <p class="news-description">
              {{article.description || 'No description available'}}
            </p>
            
            <div class="news-footer">
              <div class="news-source-info">
                <span class="source-name">ğŸ“° {{article.source?.name || 'Times of India'}}</span>
                <span class="news-timestamp">ğŸ•’ {{formatDate(article.publishedAt)}}</span>
              </div>
              <div class="news-actions">
                <button class="news-btn read-btn" (click)="openArticle(article.url)">
                  ğŸ“– Read Full
                </button>
                <button class="news-btn share-btn" (click)="shareArticle(article)">
                  ğŸ“¤ Share
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- No News State -->
      <div *ngIf="!isLoading && newsArticles.length === 0" class="no-news">
        <div class="no-news-icon">ğŸ“°</div>
        <h3>No News Available</h3>
        <p>Try selecting a different category or check your connection.</p>
        <button class="retry-btn" (click)="loadNews('top-stories')">
          ğŸ”„ Reload News
        </button>
      </div>
    </div>

    <!-- Right Sidebar -->
    <div class="sidebar right-sidebar">
      
      <!-- Quiz Card -->
      <div class="card quiz-card">
        <div class="quiz-header">
          <h3 class="card-title">
            <span class="quiz-icon">ğŸ§ </span> 
            NewsIQ Quiz
          </h3>
          <span class="quiz-difficulty easy">Easy</span>
        </div>
        
        <div class="quiz-question">
          What percentage of today's news has positive sentiment?
        </div>
        
        <div class="quiz-options">
          <button *ngFor="let option of ['62%', '65%', '75%', '55%']" 
                  class="quiz-option"
                  [class.selected]="selectedQuizOption === option"
                  (click)="selectQuizOption(option)">
            {{option}}
          </button>
        </div>
        
        <div class="quiz-actions">
          <button class="quiz-btn submit-btn" 
                  (click)="submitQuiz()"
                  [disabled]="!selectedQuizOption">
            Submit Answer
          </button>
          <button class="quiz-btn outline next-btn" 
                  (click)="nextQuizQuestion()">
            Next Question â†’
          </button>
        </div>
        
        <div *ngIf="quizResult" class="quiz-result" [class]="quizResult.isCorrect ? 'correct' : 'incorrect'">
          {{quizResult.message}}
        </div>
      </div>
      
      <!-- Achievements -->
      <div class="card achievements-card">
        <h3 class="card-title">ğŸ† Achievements</h3>
        <div class="achievements-grid">
          <div class="achievement unlocked">
            <span class="achievement-icon">ğŸ“°</span>
            <span class="achievement-name">News Reader</span>
          </div>
          <div class="achievement">
            <span class="achievement-icon">ğŸ¯</span>
            <span class="achievement-name">Accuracy Master</span>
          </div>
          <div class="achievement">
            <span class="achievement-icon">ğŸ“¤</span>
            <span class="achievement-name">Share Champion</span>
          </div>
          <div class="achievement">
            <span class="achievement-icon">ğŸ”¥</span>
            <span class="achievement-name">Streak King</span>
          </div>
        </div>
      </div>
      
      <!-- AI Summit -->
      <div class="card breaking-card">
        <div class="breaking-badge">ğŸ¤– AI SUMMIT</div>
        <h3 class="card-title">AI Summit Breakthrough</h3>
        <p class="breaking-desc">Major AI companies announce collaboration on ethical AI initiatives.</p>
        <div class="breaking-meta">
          <span class="meta-item">Tech News</span>
          <span class="meta-item">Just now</span>
        </div>
        <button class="breaking-btn" (click)="loadNews('technology')">Explore AI News</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="dashboard-footer">
    <div class="footer-left">
      <div class="footer-stats">
        <span class="stat">ğŸ“° Times of India RSS</span>
        <span class="stat">ğŸ¤– AI Sentiment Analysis</span>
        <span class="stat">ğŸ”„ Auto-refresh every 5 min</span>
      </div>
    </div>
    <div class="footer-right">
      <button class="footer-btn" (click)="refreshNews()">
        <span class="icon">ğŸ”„</span>
        Refresh Now
      </button>
      <a href="https://timesofindia.indiatimes.com" 
         target="_blank" 
         class="footer-btn">
        <span class="icon">ğŸ“°</span>
        TOI Source
      </a>
    </div>
  </footer>
</div>